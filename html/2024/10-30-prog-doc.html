<!DOCTYPE html>

<html lang="ru">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Документирование</title>

  <link rel="stylesheet" type="text/css" href="../main.css"/>
</head>

<body>
<h2>Документирование подпрограмм естественным языком — это идейная беспомощность</h2>

<p>Описание сути кода подпрограмм на естественном языке — это распространённая практика. Многими разработчиками она почитается за образец поведения. Вот типичный пример <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html#codePointBefore%28int%29">части официальной документации Java</a>

<style>a.self::before { content: attr(href); } pre, code, .doc {background-color:#F8F9F8;color:#111;} pre {overflow:auto;}
  p em {display:none}
</style>
  

<div class='doc'>
<p>public int codePointBefore(int index)</p>
<p>Returns the character (Unicode code point) before the specified index. The index refers to char values (Unicode code units) and ranges from 1 to length.
If the char value at (index - 1) is in the low-surrogate range, (index - 2) is not negative, and the char value at (index - 2) is in the high-surrogate range, then the supplementary code point value of the surrogate pair is returned. If the char value at index - 1 is an unpaired low-surrogate or a high-surrogate, the surrogate value is returned.</p>

<p>Parameters:</p>
<p>index - the index following the code point that should be returned</p>
<p>Returns:</p>
<p>the Unicode code point value before the given index.</p>
<p>Throws:</p>
<p>IndexOutOfBoundsException - if the index argument is less than 1 or greater than the length of this string.</p>
</div>

<p>Тем не менее, и это вполне закономерно, такое положение дел свидетельствует о фундаментальной проблеме в индустрии программирования, обнажая глубокое непонимание назначение формальных языков в целом и программирования в частности.<p>

<!--more-->
  
<p>Дело в том, что одной из главных исходных причин создания формальных языков, начиная с языка формул, было желание <b>упростить</b>, а вовсе <b>не усложнить</b> донесение особой информации. Естественный язык перегружен контекстной зависимостью, многозначностью и приблизительностью и с его помощью гораздо легче создавать иллюзию понимания, чем передавать знания.</p>

<p>С языками программирования, как формальными системами всё обстоит ровно так же — <b>нормальный</b> язык программирования является более желательной формой для передачи данных о происходящем в программе. Необходимость объяснять суть происходящего с помощью естественного языка свидетельствует о том, что
</p>

<ul><li>Программисты уже забыли для чего нужна документация и выполняют работу подобно исполнению культа
  <li>Либо плохо понимают код, который читают, и даже естественный язык, не очень подходящий для описания кода, для них оказывается более предпочтительным, чем язык кодирования. То есть косвенно признают, что кодируют на негодных с точки зрения человека языках.
</ul>

<p>При знакомстве с положением дел с распространёнными языками программирования становится легко предположить, что вторая причина главенствующая. Программисты очень посредственно понимают, что они пишут и вынуждены исследовать внешними средствами, что же именно они написали на самом деле.<p>
  
<p>Важно обратить внимание, что разделение на спецификацию и исполняемый код — это хороший подход. Но спецификацию, насколько это возможно, всё равно лучше писать на формальном языке, а не естественном. Главное отличие кода спецификации от исполняемого кода должно быть не в языке описания, а в том, что он лишён второстепенных деталей, связанных с необходимостью оптимизации и обхода ограничений исполняемой системы, что позволяет ему быть более простым и ясным. Языку спецификаций могут понадобиться средства выражения неопределённости для мест, где детали конкретного кода оказываются случайными, а не целевыми.</p>

<p>Попросил ChatGpt переписать представленный в начале пример на условный язык формальной спецификации. После ручных правок получилось такое:</p>
<pre><code>public int codePointBefore(int index)
  requires (1 &lt; index ≤ this.length()) throws IndexOutOfBoundsException 
{
  if (Character.isLowSurrogate(this.charAt(index - 1))
    && index - 2 ≥ 0
    && Character.isHighSurrogate(this.charAt(index - 2))) 
  {
    result = Character.toCodePoint(this.charAt(index - 2), this.charAt(index - 1));
  } else {
    result = this.charAt(index - 1);
  }
}</code></pre>

<p>На мой взгляд, спецификация гораздо понятней оригинала на естественном языке общения(дело не в английском). Вдобавок, спецификация даёт дополнительное представление о библиотеке, ссылаясь на её функции, а не просто на общие слова.</p>


<h3>Итого</h3>
Фомальная спецификация:
<ul><li>Понятней пространных текстов на естественных языках
  <li>Может служить основой для тестов
  <li>В отдельных случаях может служить для непосредственного исполнения (исполняемая спецификация)
</ul>

<p>Пожалуйста, пишите поменьше документации и побольше спецификаций.</p>

</body>
</html>
